{"version":3,"sources":["webpack:///src/pages/stories/Stories.vue","webpack:///./src/pages/stories/Stories.vue?cb85","webpack:///./src/pages/stories/Stories.vue"],"names":["flipAnimeTask","Stories","name","data","global","pageRotate","curPageIdx","tarPageIdx","pageLeftSrc","pageRotateSrc","pageRightSrc","pageList","totalPageNum","shadowMax","animeMaxLength","animeFloatL1","animeFloatL2","animeFloatL3","animeFloatL4","floatLeftValue","floatRightValue","isShowStory","showStoryLock","components","Menu","LangTransfer","Footer","Logo","beforeCreate","refresh_windows_size","set_lang_pack","created","this","init","resize_book","mounted","_this","window","onresize","methods","change_logo_color","watch","_pageRotate","oldPageRotate","console","log","updateImg","updateMove","mode","document","documentElement","style","setProperty","scale_ratio","height","width","that","device","i","push","L1","L2","L3","L4","setTimeout","autoRightToLeft","prepareRightToLeft","prepareLeftToRight","drag_right_to_left","e","odiv","target","disX","clientX","offsetLeft","disY","clientY","offsetTop","onmousemove","left","top","onmouseup","drag_left_to_right","length","autoLeftToRight","flipAnime","start","end","time","arguments","undefined","anime_default","targets","duration","easing","complete","show_story","opacity","hide_story","bookmark_hover","translateX","bookmark_release","stories_Stories","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","id","onselectstart","ondragstart","on","swipeup","swipedown","click","mousedown","src","_e","_v","class","staticStyle","mouseenter","mouseleave","lang","_s","lang_pack","stories_list","canBeHidden","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/4.01b0eedfed037a1f7ac8.js","sourcesContent":["<template>\n  <div id=\"book_page\" class=\"book_page\"  onselectstart=\"return false\" ondragstart=\"return false\">\n<!--    <div v-if=\"global.mode === 0\" class=\"pre_arrow_part\" @click=\"autoLeftToRight\"></div>-->\n    <v-touch\n    @swipeup=\"autoRightToLeft\"\n    @swipedown=\"autoLeftToRight\">\n      <div class=\"body_part\">\n        <div class=\"books\">\n          <div class=\"about_page\">\n            <div class=\"page_left\" @click=\"autoLeftToRight\" @mousedown=\"drag_right_to_left\">\n              <img v-if=\"pageRotateSrc.L1\" :src=\"pageLeftSrc.L1\"\n                   :style=\"'transform: translateX('+floatLeftValue * animeFloatL1+'rem);'\"\n                   class=\"img_left\"/>\n              <img v-if=\"pageRotateSrc.L2\" :src=\"pageLeftSrc.L2\"\n                   :style=\"'transform: translateX('+floatLeftValue * animeFloatL2+'rem);'\"\n                   class=\"img_left\"/>\n              <img v-if=\"pageRotateSrc.L3\" :src=\"pageLeftSrc.L3\"\n                   :style=\"'transform: translateX('+floatLeftValue * animeFloatL3+'rem);'\"\n                   class=\"img_left\"/>\n              <img v-if=\"pageRotateSrc.L4\" :src=\"pageLeftSrc.L4\"\n                   :style=\"'transform: translateX('+floatLeftValue * animeFloatL4+'rem);'\"\n                   class=\"img_left\"/>\n            </div>\n            <div :class=\"pageRotate >= -90 ? 'page_rotate':'page_rotate_left'\"\n                 :style=\"'transform: rotateY(' + pageRotate + 'deg)'\" @click=\"autoRightToLeft\" @mousedown=\"drag_left_to_right\">\n              <img\n                :style=\"pageRotate >= -90 ? 'opacity:'+(-pageRotate)/90*shadowMax : 'transform: scaleX(1); opacity:'+(180+pageRotate)/90*shadowMax\"\n                class=\"page_shadow\"\n                src=\"/static/book/page_shadow.png\"/>\n              <img v-if=\"pageRotateSrc.L1\" :src=\"pageRotateSrc.L1\"\n                   :style=\"'transform: translateX('+(pageRotate >= -90 ? floatLeftValue * animeFloatL1+'rem);' : -floatRightValue * animeFloatL1+'rem) scaleX(-1);')\"\n                   class=\"img_right\"/>\n              <img v-if=\"pageRotateSrc.L2\" :src=\"pageRotateSrc.L2\"\n                   :style=\"'transform: translateX('+(pageRotate >= -90 ? floatLeftValue * animeFloatL2+'rem);' : -floatRightValue * animeFloatL2+'rem) scaleX(-1);')\"\n                   class=\"img_right\"/>\n              <img v-if=\"pageRotateSrc.L3\" :src=\"pageRotateSrc.L3\"\n                   :style=\"'transform: translateX('+(pageRotate >= -90 ? floatLeftValue * animeFloatL3+'rem);' : -floatRightValue * animeFloatL3+'rem) scaleX(-1);')\"\n                   class=\"img_right\"/>\n              <img v-if=\"pageRotateSrc.L4\" :src=\"pageRotateSrc.L4\"\n                   :style=\"'transform: translateX('+(pageRotate >= -90 ? floatLeftValue * animeFloatL4+'rem);' : -floatRightValue * animeFloatL4+'rem) scaleX(-1);')\"\n                   class=\"img_right\"/>\n            </div>\n\n            <div class=\"bookmark_rotate_box\" :style=\"'transform: rotateY(' + pageRotate + 'deg)'\" v-if=\"curPageIdx !== 0 && pageRotate !== 0 && pageRotate >= -90\">\n              <div class=\"bookmark_box\" style=\"opacity: 0.8\" id=\"bookmark_rotate\">\n                <img class=\"bookmark\" src=\"static/book/bookmark.svg\">\n              </div>\n            </div>\n\n            <div class=\"page_right\" @click=\"autoRightToLeft\">\n              <img v-if=\"pageRotateSrc.L1\" :src=\"pageRightSrc.L1\"\n                   :style=\"'transform: translateX('+floatRightValue * animeFloatL1+'rem);'\"\n                   class=\"img_right\"/>\n              <img v-if=\"pageRotateSrc.L2\" :src=\"pageRightSrc.L2\"\n                   :style=\"'transform: translateX('+floatRightValue * animeFloatL2+'rem);'\"\n                   class=\"img_right\"/>\n              <img v-if=\"pageRotateSrc.L3\" :src=\"pageRightSrc.L3\"\n                   :style=\"'transform: translateX('+floatRightValue * animeFloatL3+'rem);'\"\n                   class=\"img_right\"/>\n              <img v-if=\"pageRotateSrc.L4\" :src=\"pageRightSrc.L4\"\n                   :style=\"'transform: translateX('+floatRightValue * animeFloatL4+'rem);'\"\n                   class=\"img_right\"/>\n            </div>\n\n            <div class=\"bookmark_box\" v-if=\"curPageIdx !== 0\" @click=\"show_story\"\n                 @mouseenter=\"bookmark_hover\" @mouseleave=\"bookmark_release\">\n              <img class=\"bookmark\" src=\"static/book/bookmark.svg\">\n            </div>\n\n          </div>\n        </div>\n      </div>\n    </v-touch>\n\n    <div class=\"story_mask\" v-if=\"isShowStory\" @click=\"hide_story\">\n      <div :class=\" 'content_text_' + global.lang + ' story_text'\">{{global.lang_pack.stories_list[curPageIdx]}}\n      </div>\n    </div>\n\n<!--    <div v-if=\"global.mode === 0\" class=\"next_arrow_part\" @click=\"autoRightToLeft\"></div>-->\n    <LangTransfer></LangTransfer>\n    <Logo :canBeHidden=false></Logo>\n    <Menu></Menu>\n  </div>\n</template>\n\n<style scoped>\n\ndiv.book_page {\n  background: #f7f7f7;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  display: flex;\n  flex-direction: row;\n  overflow: hidden;\n}\n\ndiv.body_part {\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n  z-index:2;\n  width: calc(var(--book_width));\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-items: center;\n}\n\ndiv.books {\n  display: inline-block;\n  width: calc(var(--book_width));\n  height: calc(var(--book_height));\n}\n\ndiv.about_page {\n  position: absolute;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-items: center;\n  width: calc(var(--book_width));\n  height: calc(var(--book_height));\n  perspective: 2500px;\n  transform-style: preserve-3d;\n}\n\ndiv.page_left {\n  transform-origin: right;\n  position: absolute;\n  width: calc(var(--book_width) / 2);\n  height: calc(var(--book_height));\n  overflow: hidden;\n  border-bottom-left-radius: 6.161%;\n  border-top-left-radius: 6.161%;\n  cursor: url(\"/static/book/pre_arrow.png\"), pointer;\n}\n\ndiv.page_rotate {\n  transform-origin: left;\n  position: absolute;\n  right: 0;\n  width: calc(var(--book_width) / 2);\n  height: calc(var(--book_height));\n  overflow: hidden;\n  border-bottom-right-radius: 6.161%;\n  border-top-right-radius: 6.161%;\n  z-index: 1;\n  cursor: url(\"/static/book/next_arrow.png\"), pointer;\n}\n\ndiv.page_rotate_left {\n  position: absolute;\n  left: 0;\n  overflow: hidden;\n  border-bottom-right-radius: 6.161%;\n  border-top-right-radius: 6.161%;\n  width: calc(var(--book_width));\n  height: calc(var(--book_height));\n  cursor: url(\"/static/book/pre_arrow.png\"), pointer;\n}\n\nimg.page_shadow {\n  position: absolute;\n  width: calc(var(--book_width));\n  height: calc(var(--book_height));\n  z-index: 1;\n}\n\ndiv.page_right {\n  transform-origin: left;\n  position: absolute;\n  right: 0;\n  width: calc(var(--book_width) / 2);\n  height: calc(var(--book_height));\n  overflow: hidden;\n  border-bottom-right-radius: 6.161%;\n  border-top-right-radius: 6.161%;\n  cursor: url(\"/static/book/next_arrow.png\"), pointer;\n}\n\nimg.img_left {\n  position: absolute;\n  left: 0;\n  width: calc(var(--book_width));\n  height: calc(var(--book_height));\n}\n\nimg.img_right {\n  position: absolute;\n  right: 0;\n  width: calc(var(--book_width));\n  height: calc(var(--book_height));\n}\n\ndiv.bookmark_rotate_box{\n  transform-origin: left;\n  position: absolute;\n  right: 0;\n  width: calc(var(--book_width) / 2);\n  height: calc(var(--book_height));\n  border-bottom-right-radius: 6.161%;\n  border-top-right-radius: 6.161%;\n  cursor: url(\"/static/book/next_arrow.png\"), pointer;\n  z-index: 1;\n}\n\ndiv.bookmark_box{\n  position: absolute;\n  z-index: 1;\n  right: -40rem;\n  top: 100rem;\n  width: 120rem;\n  cursor: pointer;\n  opacity: 0.8;\n}\n\nimg.bookmark{}\n\ndiv.story_mask{\n  position: fixed;\n  z-index: 4;\n  background: #37383d;\n  opacity: 0;\n  width: 100%;\n  height: 100vh;\n  left: 0;\n  top: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n}\n\ndiv.story_text{\n  max-height: 75vh;\n  width: 600rem;\n  color: white;\n  overflow-y: scroll;\n  padding: 100rem;\n}\n\n/*手机版样式*/\n@media screen and (max-width: 540px) {\n  div.body_part {\n    position: fixed;\n    /*left: 25rem;*/\n    top: 120rem;\n    width: 700rem;\n    height: calc(var(--screen_height) - 120rem);\n    display: unset;\n  }\n\n  div.books {\n    transform-origin: top left;\n    transform: translate(calc(var(--book_height) + (700rem - var(--book_height)) / 2), calc((var(--screen_height) - 120rem - var(--book_width)) / 2)) rotate(90deg);\n  }\n\n  div.bookmark_box{\n    position: absolute;\n    z-index: 1;\n    right: calc(var(--book_width) / 2 - 100rem);\n    top: 43rem;\n    height: 0;\n    cursor: pointer;\n    opacity: 0.8;\n    transform: rotate(-90deg);\n  }\n\n  div.story_text{\n    margin-top: 0;\n    max-height: calc(100vh - 240rem);\n    width: 600rem;\n    color: white;\n    overflow-y: scroll;\n    padding: unset;\n  }\n}\n</style>\n\n<script>\nimport global from \"../global\";\nimport anime from \"../../../modules/anime\";\nimport Menu from \"../../components/menu/Menu\";\nimport LangTransfer from \"../../components/lang_transfer/LangTransfer\";\nimport Footer from \"../../components/footer/Footer\";\nimport Logo from \"../../components/logo/Logo\"\n// when flipAnimeTask is null means anime finished\nlet flipAnimeTask\n\n//export default\nexport default {\n  name: \"Stories\",\n  data() {\n    return {\n      global: global,\n      pageRotate: 0,\n      curPageIdx: 0,\n      tarPageIdx: 0,\n      pageLeftSrc: null,\n      pageRotateSrc: null,\n      pageRightSrc: null,\n      pageList: [], //页面布局信息\n      totalPageNum: 9,//默认多少页书||增加或删除页面，需要改变这个页数的值||\n      shadowMax: 0.2,//页面翻转阴影最大值\n      animeMaxLength: 660,//图层浮动的最大范围\n      animeFloatL1: 0,//L1层的浮动比例\n      animeFloatL2: 0.2,//L2层的浮动比例\n      animeFloatL3: 0.8,//L3层的浮动比例\n      animeFloatL4: 0.4,//L4层的浮动比例\n      floatLeftValue: 0,//左半部分浮动值\n      floatRightValue: 0,//右半部分浮动值\n\n      isShowStory: false, // 是否展示了当前的故事内容\n      showStoryLock: false, // 上锁防止重复触发故事展示\n    };\n  },\n  components: {\n    Menu,\n    LangTransfer,\n    Footer,\n    Logo\n  },\n  beforeCreate() {\n    global.refresh_windows_size();\n    global.set_lang_pack();\n  },\n  created() {\n    this.init()\n    this.resize_book()\n  },\n  mounted() {\n    // mount the window size listen\n    window.onresize = () => {\n      return (() => {\n        global.refresh_windows_size();\n        this.resize_book()\n      })();\n    };\n    Menu.methods.change_logo_color(\"#251714\", \"#efcd24\", 1000);\n  },\n  watch: {\n    // Listen the page rotate event and then change the img and the show mode\n    pageRotate: function (pageRotate, oldPageRotate) {\n      console.log(this.pageRotate)\n      // from left to right\n      if (oldPageRotate > pageRotate && oldPageRotate - pageRotate < 179) {\n        if (pageRotate === -180) {\n          this.curPageIdx += 1\n          this.pageRotate = 0\n        }\n      }\n      // form right to left\n      else if (oldPageRotate < pageRotate && pageRotate - oldPageRotate < 179) {\n        if (oldPageRotate === -180) {\n          this.curPageIdx -= 1\n        }\n      }\n      this.updateImg()\n      this.updateMove()\n    },\n  },\n  methods: {\n    //refresh mobile height for css\n    resize_book() {\n      if (global.mode === 0) {\n        document.documentElement.style.setProperty(\"--book_width\", \"1200rem\");\n        document.documentElement.style.setProperty(\"--book_height\", \"700rem\");\n        return\n      }\n      let scale_ratio = 700 / 752.6\n      let height = global.height / global.width * 750\n      document.documentElement.style.setProperty(\"--screen_height\", height + \"rem\");\n      let cal_width = scale_ratio * 1320\n      if (cal_width > height - 170) {\n        scale_ratio = (height - 170) / 1320\n      }\n      document.documentElement.style.setProperty(\"--book_width\", 1320 * scale_ratio + \"rem\");\n      document.documentElement.style.setProperty(\"--book_height\", 752.6 * scale_ratio + \"rem\");\n    },\n    init() {\n      let that = this\n      let device\n      if(global.mode === 0)\n        device = \"pc\"\n      else if(global.mode === 1)\n        device = \"mobile\"\n      // initial the page list\n      for (let i = 1; i <= this.totalPageNum; i++) {\n        this.pageList.push({\n          L1: \"/static/book/\"+device+\"/\" + i + \"/1.png\",\n          L2: \"/static/book/\"+device+\"/\" + i + \"/2.png\",\n          L3: \"/static/book/\"+device+\"/\" + i + \"/3.png\",\n          L4: \"/static/book/\"+device+\"/\" + i + \"/4.png\",\n        })\n      }\n      this.updateImg()\n\n      setTimeout(()=>{\n        that.autoRightToLeft()\n      },500)\n    },\n    prepareRightToLeft() {\n      if (this.pageRotate === -180)\n        this.pageRotate = 0\n      this.pageRightSrc = this.pageList[this.curPageIdx + 1]\n    },\n    prepareLeftToRight() {\n      if (this.pageRotate === 0)\n        this.pageRotate = -180\n      this.pageRightSrc = this.pageList[this.curPageIdx]\n    },\n    drag_right_to_left(e){\n      let odiv = e.target;        //获取目标元素\n\n      //算出鼠标相对元素的位置\n      let disX = e.clientX - odiv.offsetLeft;\n      let disY = e.clientY - odiv.offsetTop;\n      document.onmousemove = (e)=>{       //鼠标按下并移动的事件\n        //用鼠标的位置减去鼠标相对元素的位置，得到元素的位置\n        let left = e.clientX - disX;\n        let top = e.clientY - disY;\n\n        console.log(left)\n        console.log(top)\n        //绑定元素位置到positionX和positionY上面\n        // this.positionX = top;\n        // this.positionY = left;\n\n        //移动当前元素\n        // odiv.style.left = left + 'px';\n        // odiv.style.top = top + 'px';\n      };\n      document.onmouseup = (e) => {\n        document.onmousemove = null;\n        document.onmouseup = null;\n      };\n    },\n    drag_left_to_right(){\n      console.log(\"drag\")\n    },\n    updateImg() {\n      this.pageLeftSrc = this.pageList[this.curPageIdx]\n      if (this.curPageIdx + 1 !== this.pageList.length) {\n        this.pageRightSrc = this.pageList[this.curPageIdx + 1]\n        this.pageRotateSrc = this.pageRotate >= -90 ? this.pageList[this.curPageIdx] : this.pageList[this.curPageIdx + 1]\n      }\n    },\n    updateMove() {\n      this.floatLeftValue = this.pageRotate / 180 * this.animeMaxLength\n      this.floatRightValue = this.floatLeftValue + this.animeMaxLength\n    },\n    autoLeftToRight() {\n      if (this.curPageIdx === 0 || this.tarPageIdx === 0 || flipAnimeTask != null)\n        return\n      this.tarPageIdx -= 1;\n      this.prepareLeftToRight()\n      flipAnimeTask = this.flipAnime(this.pageRotate, 0)\n    },\n    autoRightToLeft() {\n      if (this.curPageIdx === this.pageList.length - 1 || this.tarPageIdx === this.pageList.length - 1 || flipAnimeTask != null)\n        return\n      this.tarPageIdx += 1;\n      this.prepareRightToLeft()\n      flipAnimeTask = this.flipAnime(this.pageRotate, -180)\n    },\n    flipAnime(start, end, time = 1000) {\n      return anime({\n        targets: this,\n        pageRotate: [start, end],\n        duration: time,\n        easing: \"linear\",\n        complete() {\n          flipAnimeTask = null\n        }\n      });\n    },\n\n    show_story() {\n      let that = this\n      if (that.showStoryLock || that.isShowStory) return\n      // 开始变换，上锁\n      that.showStoryLock = true\n      // 如果页面还没有显示故事，那么让他准备显示\n        that.isShowStory = true\n        setTimeout(() => {\n          Menu.methods.change_logo_color(\"#ffffff\", \"#efcd24\", 1000);\n          // 开始动画渐变\n          anime({\n            targets: \"div.story_mask\",\n            opacity: 0.9,\n            duration: 500,\n            easing: \"linear\",\n            complete() {\n              // 完毕，解锁\n              that.showStoryLock = false\n            }\n          });\n        }, 1)\n    },\n\n    hide_story() {\n      let that = this\n      if (that.showStoryLock || !that.isShowStory) return\n      // 开始变换，上锁x\n      that.showStoryLock = true\n      // 如果页面已经显示了故事，那么就是把他隐藏\n        setTimeout(() => {\n          Menu.methods.change_logo_color(\"#251714\", \"#efcd24\", 1000);\n          // 开始动画渐变\n          anime({\n            targets: \"div.story_mask\",\n            opacity: 0,\n            duration: 500,\n            easing: \"linear\",\n            complete() {\n              that.isShowStory = false\n              that.showStoryLock = false\n            }\n          });\n        }, 1)\n    },\n\n    bookmark_hover(){\n      anime({\n        targets: \"img.bookmark\",\n        translateX: \"30rem\",\n        duration: 200,\n        easing: \"linear\",\n        complete() {\n        }\n      });\n    },\n    bookmark_release(){\n      anime({\n        targets: \"img.bookmark\",\n        translateX: \"0\",\n        duration: 200,\n        easing: \"linear\",\n        complete() {\n        }\n      });\n    }\n\n  },\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/stories/Stories.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"book_page\",attrs:{\"id\":\"book_page\",\"onselectstart\":\"return false\",\"ondragstart\":\"return false\"}},[_c('v-touch',{on:{\"swipeup\":_vm.autoRightToLeft,\"swipedown\":_vm.autoLeftToRight}},[_c('div',{staticClass:\"body_part\"},[_c('div',{staticClass:\"books\"},[_c('div',{staticClass:\"about_page\"},[_c('div',{staticClass:\"page_left\",on:{\"click\":_vm.autoLeftToRight,\"mousedown\":_vm.drag_right_to_left}},[(_vm.pageRotateSrc.L1)?_c('img',{staticClass:\"img_left\",style:('transform: translateX('+_vm.floatLeftValue * _vm.animeFloatL1+'rem);'),attrs:{\"src\":_vm.pageLeftSrc.L1}}):_vm._e(),_vm._v(\" \"),(_vm.pageRotateSrc.L2)?_c('img',{staticClass:\"img_left\",style:('transform: translateX('+_vm.floatLeftValue * _vm.animeFloatL2+'rem);'),attrs:{\"src\":_vm.pageLeftSrc.L2}}):_vm._e(),_vm._v(\" \"),(_vm.pageRotateSrc.L3)?_c('img',{staticClass:\"img_left\",style:('transform: translateX('+_vm.floatLeftValue * _vm.animeFloatL3+'rem);'),attrs:{\"src\":_vm.pageLeftSrc.L3}}):_vm._e(),_vm._v(\" \"),(_vm.pageRotateSrc.L4)?_c('img',{staticClass:\"img_left\",style:('transform: translateX('+_vm.floatLeftValue * _vm.animeFloatL4+'rem);'),attrs:{\"src\":_vm.pageLeftSrc.L4}}):_vm._e()]),_vm._v(\" \"),_c('div',{class:_vm.pageRotate >= -90 ? 'page_rotate':'page_rotate_left',style:('transform: rotateY(' + _vm.pageRotate + 'deg)'),on:{\"click\":_vm.autoRightToLeft,\"mousedown\":_vm.drag_left_to_right}},[_c('img',{staticClass:\"page_shadow\",style:(_vm.pageRotate >= -90 ? 'opacity:'+(-_vm.pageRotate)/90*_vm.shadowMax : 'transform: scaleX(1); opacity:'+(180+_vm.pageRotate)/90*_vm.shadowMax),attrs:{\"src\":\"/static/book/page_shadow.png\"}}),_vm._v(\" \"),(_vm.pageRotateSrc.L1)?_c('img',{staticClass:\"img_right\",style:('transform: translateX('+(_vm.pageRotate >= -90 ? _vm.floatLeftValue * _vm.animeFloatL1+'rem);' : -_vm.floatRightValue * _vm.animeFloatL1+'rem) scaleX(-1);')),attrs:{\"src\":_vm.pageRotateSrc.L1}}):_vm._e(),_vm._v(\" \"),(_vm.pageRotateSrc.L2)?_c('img',{staticClass:\"img_right\",style:('transform: translateX('+(_vm.pageRotate >= -90 ? _vm.floatLeftValue * _vm.animeFloatL2+'rem);' : -_vm.floatRightValue * _vm.animeFloatL2+'rem) scaleX(-1);')),attrs:{\"src\":_vm.pageRotateSrc.L2}}):_vm._e(),_vm._v(\" \"),(_vm.pageRotateSrc.L3)?_c('img',{staticClass:\"img_right\",style:('transform: translateX('+(_vm.pageRotate >= -90 ? _vm.floatLeftValue * _vm.animeFloatL3+'rem);' : -_vm.floatRightValue * _vm.animeFloatL3+'rem) scaleX(-1);')),attrs:{\"src\":_vm.pageRotateSrc.L3}}):_vm._e(),_vm._v(\" \"),(_vm.pageRotateSrc.L4)?_c('img',{staticClass:\"img_right\",style:('transform: translateX('+(_vm.pageRotate >= -90 ? _vm.floatLeftValue * _vm.animeFloatL4+'rem);' : -_vm.floatRightValue * _vm.animeFloatL4+'rem) scaleX(-1);')),attrs:{\"src\":_vm.pageRotateSrc.L4}}):_vm._e()]),_vm._v(\" \"),(_vm.curPageIdx !== 0 && _vm.pageRotate !== 0 && _vm.pageRotate >= -90)?_c('div',{staticClass:\"bookmark_rotate_box\",style:('transform: rotateY(' + _vm.pageRotate + 'deg)')},[_c('div',{staticClass:\"bookmark_box\",staticStyle:{\"opacity\":\"0.8\"},attrs:{\"id\":\"bookmark_rotate\"}},[_c('img',{staticClass:\"bookmark\",attrs:{\"src\":\"static/book/bookmark.svg\"}})])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"page_right\",on:{\"click\":_vm.autoRightToLeft}},[(_vm.pageRotateSrc.L1)?_c('img',{staticClass:\"img_right\",style:('transform: translateX('+_vm.floatRightValue * _vm.animeFloatL1+'rem);'),attrs:{\"src\":_vm.pageRightSrc.L1}}):_vm._e(),_vm._v(\" \"),(_vm.pageRotateSrc.L2)?_c('img',{staticClass:\"img_right\",style:('transform: translateX('+_vm.floatRightValue * _vm.animeFloatL2+'rem);'),attrs:{\"src\":_vm.pageRightSrc.L2}}):_vm._e(),_vm._v(\" \"),(_vm.pageRotateSrc.L3)?_c('img',{staticClass:\"img_right\",style:('transform: translateX('+_vm.floatRightValue * _vm.animeFloatL3+'rem);'),attrs:{\"src\":_vm.pageRightSrc.L3}}):_vm._e(),_vm._v(\" \"),(_vm.pageRotateSrc.L4)?_c('img',{staticClass:\"img_right\",style:('transform: translateX('+_vm.floatRightValue * _vm.animeFloatL4+'rem);'),attrs:{\"src\":_vm.pageRightSrc.L4}}):_vm._e()]),_vm._v(\" \"),(_vm.curPageIdx !== 0)?_c('div',{staticClass:\"bookmark_box\",on:{\"click\":_vm.show_story,\"mouseenter\":_vm.bookmark_hover,\"mouseleave\":_vm.bookmark_release}},[_c('img',{staticClass:\"bookmark\",attrs:{\"src\":\"static/book/bookmark.svg\"}})]):_vm._e()])])])]),_vm._v(\" \"),(_vm.isShowStory)?_c('div',{staticClass:\"story_mask\",on:{\"click\":_vm.hide_story}},[_c('div',{class:'content_text_' + _vm.global.lang + ' story_text'},[_vm._v(_vm._s(_vm.global.lang_pack.stories_list[_vm.curPageIdx])+\"\\n      \")])]):_vm._e(),_vm._v(\" \"),_c('LangTransfer'),_vm._v(\" \"),_c('Logo',{attrs:{\"canBeHidden\":false}}),_vm._v(\" \"),_c('Menu')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-aaebbcb8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/stories/Stories.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-aaebbcb8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Stories.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Stories.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Stories.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-aaebbcb8\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Stories.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-aaebbcb8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/stories/Stories.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}