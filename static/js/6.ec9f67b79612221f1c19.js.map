{"version":3,"sources":["webpack:///src/pages/stories/Stories.vue","webpack:///./src/pages/stories/Stories.vue?c6a3","webpack:///./src/pages/stories/Stories.vue"],"names":["flipAnimeTask","Stories","name","data","global","pageRotate","curPageIdx","tarPageIdx","pageLeftSrc","pageRotateSrc","pageRightSrc","pageList","totalPageNum","shadowMax","animeMaxLength","animeFloatL1","animeFloatL2","animeFloatL3","animeFloatL4","floatLeftValue","floatRightValue","components","Menu","LangTransfer","Footer","beforeCreate","refresh_windows_size","set_lang_pack","created","this","init","resize_book","mounted","_this","window","onresize","methods","change_logo_color","watch","_pageRotate","oldPageRotate","updateImg","updateMove","mode","document","documentElement","style","setProperty","scale_ratio","height","width","i","push","L1","L2","L3","L4","prepareRightToLeft","prepareLeftToRight","length","autoLeftToRight","flipAnime","autoRightToLeft","start","end","time","arguments","undefined","anime_default","targets","duration","easing","complete","stories_Stories","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","id","on","click","_e","_v","src","class","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/6.ec9f67b79612221f1c19.js","sourcesContent":["<template>\n  <div id=\"book_page\" class=\"book_page\">\n    <div v-if=\"global.mode === 0\" class=\"pre_arrow_part\" @click=\"autoLeftToRight\"></div>\n    <div class=\"body_part\">\n      <div class=\"books\">\n        <div class=\"page\">\n          <div class=\"page_left\" @click=\"autoLeftToRight\">\n            <img v-if=\"pageRotateSrc.L1\" :src=\"pageLeftSrc.L1\"\n                 :style=\"'transform: translateX('+floatLeftValue * animeFloatL1+'rem);'\"\n                 class=\"img_left\"/>\n            <img v-if=\"pageRotateSrc.L2\" :src=\"pageLeftSrc.L2\"\n                 :style=\"'transform: translateX('+floatLeftValue * animeFloatL2+'rem);'\"\n                 class=\"img_left\"/>\n            <img v-if=\"pageRotateSrc.L3\" :src=\"pageLeftSrc.L3\"\n                 :style=\"'transform: translateX('+floatLeftValue * animeFloatL3+'rem);'\"\n                 class=\"img_left\"/>\n            <img v-if=\"pageRotateSrc.L4\" :src=\"pageLeftSrc.L4\"\n                 :style=\"'transform: translateX('+floatLeftValue * animeFloatL4+'rem);'\"\n                 class=\"img_left\"/>\n          </div>\n          <!--          TODO: 这里为了避免左翻页会产生闪动情况，计划分别使用两个翻页做效果，但是无用-->\n          <div :class=\"pageRotate >= -90 ? 'page_rotate':'page_rotate_left'\"\n               :style=\"'transform: rotateY(' + pageRotate + 'deg)'\" @click=\"autoRightToLeft\">\n            <img\n              :style=\"pageRotate >= -90 ? 'opacity:'+(-pageRotate)/90*shadowMax : 'transform: scaleX(1); opacity:'+(180+pageRotate)/90*shadowMax\"\n              class=\"page_shadow\"\n              src=\"/static/book/page_shadow.png\"/>\n            <img v-if=\"pageRotateSrc.L1\" :src=\"pageRotateSrc.L1\"\n                 :style=\"'transform: translateX('+(pageRotate >= -90 ? floatLeftValue * animeFloatL1+'rem);' : -floatRightValue * animeFloatL1+'rem) scaleX(-1);')\"\n                 class=\"img_right\"/>\n            <img v-if=\"pageRotateSrc.L2\" :src=\"pageRotateSrc.L2\"\n                 :style=\"'transform: translateX('+(pageRotate >= -90 ? floatLeftValue * animeFloatL2+'rem);' : -floatRightValue * animeFloatL2+'rem) scaleX(-1);')\"\n                 class=\"img_right\"/>\n            <img v-if=\"pageRotateSrc.L3\" :src=\"pageRotateSrc.L3\"\n                 :style=\"'transform: translateX('+(pageRotate >= -90 ? floatLeftValue * animeFloatL3+'rem);' : -floatRightValue * animeFloatL3+'rem) scaleX(-1);')\"\n                 class=\"img_right\"/>\n            <img v-if=\"pageRotateSrc.L4\" :src=\"pageRotateSrc.L4\"\n                 :style=\"'transform: translateX('+(pageRotate >= -90 ? floatLeftValue * animeFloatL4+'rem);' : -floatRightValue * animeFloatL4+'rem) scaleX(-1);')\"\n                 class=\"img_right\"/>\n          </div>\n          <div class=\"page_right\" @click=\"autoRightToLeft\">\n            <img v-if=\"pageRotateSrc.L1\" :src=\"pageRightSrc.L1\"\n                 :style=\"'transform: translateX('+floatRightValue * animeFloatL1+'rem);'\"\n                 class=\"img_right\"/>\n            <img v-if=\"pageRotateSrc.L2\" :src=\"pageRightSrc.L2\"\n                 :style=\"'transform: translateX('+floatRightValue * animeFloatL2+'rem);'\"\n                 class=\"img_right\"/>\n            <img v-if=\"pageRotateSrc.L3\" :src=\"pageRightSrc.L3\"\n                 :style=\"'transform: translateX('+floatRightValue * animeFloatL3+'rem);'\"\n                 class=\"img_right\"/>\n            <img v-if=\"pageRotateSrc.L4\" :src=\"pageRightSrc.L4\"\n                 :style=\"'transform: translateX('+floatRightValue * animeFloatL4+'rem);'\"\n                 class=\"img_right\"/>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div v-if=\"global.mode === 0\" class=\"next_arrow_part\" @click=\"autoRightToLeft\"></div>\n    <LangTransfer></LangTransfer>\n    <Menu></Menu>\n  </div>\n</template>\n\n<style scoped>\n\ndiv.book_page {\n  background: #f7f7f7;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  display: flex;\n  flex-direction: row;\n  overflow: hidden;\n}\n\ndiv.pre_arrow_part {\n  width: 200rem;\n  height: 100%;\n  margin-left: 100rem;\n  /*background: #000000;*/\n}\n\ndiv.next_arrow_part {\n  width: 200rem;\n  height: 100%;\n  margin-right: 100rem;\n  /*background: #000000;*/\n}\n\ndiv.body_part {\n  width: calc(var(--book_width));\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-items: center;\n}\n\ndiv.books {\n  display: inline-block;\n  width: calc(var(--book_width));\n  height: calc(var(--book_height));\n}\n\ndiv.page {\n  position: absolute;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-items: center;\n  width: calc(var(--book_width));\n  height: calc(var(--book_height));\n  perspective: 2500px;\n  transform-style: preserve-3d;\n}\n\ndiv.page_left {\n  transform-origin: right;\n  position: absolute;\n  width: calc(var(--book_width) / 2);\n  height: calc(var(--book_height));\n  overflow: hidden;\n  border-bottom-left-radius: 6.161%;\n  border-top-left-radius: 6.161%;\n  cursor: url(\"/static/book/pre_arrow.png\"), pointer;\n}\n\ndiv.page_rotate {\n  transform-origin: left;\n  position: absolute;\n  right: 0;\n  width: calc(var(--book_width) / 2);\n  height: calc(var(--book_height));\n  overflow: hidden;\n  border-bottom-right-radius: 6.161%;\n  border-top-right-radius: 6.161%;\n  z-index: 1;\n  cursor: url(\"/static/book/next_arrow.png\"), pointer;\n}\n\ndiv.page_rotate_left {\n  position: absolute;\n  left: 0;\n  overflow: hidden;\n  border-bottom-right-radius: 6.161%;\n  border-top-right-radius: 6.161%;\n  width: calc(var(--book_width));\n  height: calc(var(--book_height));\n  cursor: url(\"/static/book/pre_arrow.png\"), pointer;\n}\n\nimg.page_shadow {\n  position: absolute;\n  width: calc(var(--book_width));\n  height: calc(var(--book_height));\n  z-index: 1;\n}\n\ndiv.page_right {\n  transform-origin: left;\n  position: absolute;\n  right: 0;\n  width: calc(var(--book_width) / 2);\n  height: calc(var(--book_height));\n  overflow: hidden;\n  border-bottom-right-radius: 6.161%;\n  border-top-right-radius: 6.161%;\n  cursor: url(\"/static/book/next_arrow.png\"), pointer;\n}\n\nimg.img_left {\n  position: absolute;\n  left: 0;\n  width: calc(var(--book_width));\n  height: calc(var(--book_height));\n}\n\nimg.img_right {\n  position: absolute;\n  right: 0;\n  width: calc(var(--book_width));\n  height: calc(var(--book_height));\n}\n\n/*手机版样式*/\n@media screen and (max-width: 540px) {\n  div.body_part {\n    position: fixed;\n    left: 25rem;\n    top: 120rem;\n    width: 700rem;\n    height: calc(var(--screen_height) - 120rem);\n    display: unset;\n  }\n\n  div.books {\n    transform-origin: top left;\n    transform: translate(calc(var(--book_height) + (700rem - var(--book_height)) / 2), calc((var(--screen_height) - 120rem - var(--book_width)) / 2)) rotate(90deg);\n  }\n}\n</style>\n\n<script>\nimport global from \"../global\";\nimport anime from \"../../../modules/anime\";\nimport Menu from \"../../components/menu/Menu\";\nimport LangTransfer from \"../../components/lang_transfer/LangTransfer\";\nimport Footer from \"../../components/footer/Footer\";\n// when flipAnimeTask is null means anime finished\nlet flipAnimeTask\n\n//export default\nexport default {\n  name: \"Stories\",\n  data() {\n    return {\n      global: global,\n      pageRotate: 0,\n      curPageIdx: 0,\n      tarPageIdx: 0,\n      pageLeftSrc: null,\n      pageRotateSrc: null,\n      pageRightSrc: null,\n      pageList: [], //页面布局信息\n      totalPageNum: 9,//默认多少页书||增加或删除页面，需要改变这个页数的值||\n      shadowMax: 0.2,//页面翻转阴影最大值\n      animeMaxLength: 660,//图层浮动的最大范围\n      animeFloatL1: 0,//L1层的浮动比例\n      animeFloatL2: 0.2,//L2层的浮动比例\n      animeFloatL3: 0.8,//L3层的浮动比例\n      animeFloatL4: 0.4,//L4层的浮动比例\n      floatLeftValue: 0,//左半部分浮动值\n      floatRightValue: 0,//右半部分浮动值\n    };\n  },\n  components: {\n    Menu,\n    LangTransfer,\n    Footer\n  },\n  beforeCreate() {\n    global.refresh_windows_size();\n    global.set_lang_pack();\n  },\n  created() {\n    this.init()\n    this.resize_book()\n  },\n  mounted() {\n    // mount the window size listen\n    window.onresize = () => {\n      return (() => {\n        global.refresh_windows_size();\n        this.resize_book()\n      })();\n    };\n    Menu.methods.change_logo_color(\"#251714\", \"#efcd24\", 1000);\n  },\n  watch: {\n    // Listen the page rotate event and then change the img and the show mode\n    pageRotate: function (pageRotate, oldPageRotate) {\n      // from left to right\n      if (oldPageRotate > pageRotate && oldPageRotate - pageRotate < 179) {\n        if (pageRotate === -180) {\n          this.curPageIdx += 1\n          this.pageRotate = 0\n        }\n      }\n      // form right to left\n      else if (oldPageRotate < pageRotate && pageRotate - oldPageRotate < 179) {\n        if (oldPageRotate === -180) {\n          this.curPageIdx -= 1\n        }\n      }\n      this.updateImg()\n      this.updateMove()\n    },\n  },\n  methods: {\n    //refresh mobile height for css\n    resize_book() {\n      if (global.mode === 0) {\n        document.documentElement.style.setProperty(\"--book_width\", \"1320rem\");\n        document.documentElement.style.setProperty(\"--book_height\", \"752.6rem\");\n        return\n      }\n      let scale_ratio = 700 / 752.6\n      let height = global.height / global.width * 750\n      document.documentElement.style.setProperty(\"--screen_height\", height + \"rem\");\n      let cal_width = scale_ratio * 1320\n      if (cal_width > height - 170) {\n        scale_ratio = (height - 170) / 1320\n      }\n      document.documentElement.style.setProperty(\"--book_width\", 1320 * scale_ratio + \"rem\");\n      document.documentElement.style.setProperty(\"--book_height\", 752.6 * scale_ratio + \"rem\");\n    },\n    init() {\n      let that = this\n      // initial the page list\n      for (let i = 1; i <= this.totalPageNum; i++) {\n        this.pageList.push({\n          L1: \"/static/book/pc/\" + i + \"/1.png\",\n          L2: \"/static/book/pc/\" + i + \"/2.png\",\n          L3: \"/static/book/pc/\" + i + \"/3.png\",\n          L4: \"/static/book/pc/\" + i + \"/4.png\",\n        })\n      }\n      this.updateImg()\n    },\n    prepareRightToLeft() {\n      if (this.pageRotate === -180)\n        this.pageRotate = 0\n      this.pageRightSrc = this.pageList[this.curPageIdx + 1]\n    },\n    prepareLeftToRight() {\n      if (this.pageRotate === 0)\n        this.pageRotate = -180\n      this.pageRightSrc = this.pageList[this.curPageIdx]\n    },\n    updateImg() {\n      this.pageLeftSrc = this.pageList[this.curPageIdx]\n      if (this.curPageIdx + 1 !== this.pageList.length) {\n        this.pageRightSrc = this.pageList[this.curPageIdx + 1]\n        this.pageRotateSrc = this.pageRotate >= -90 ? this.pageList[this.curPageIdx] : this.pageList[this.curPageIdx + 1]\n      }\n    },\n    updateMove() {\n      this.floatLeftValue = this.pageRotate / 180 * this.animeMaxLength\n      this.floatRightValue = this.floatLeftValue + this.animeMaxLength\n    },\n    autoLeftToRight() {\n      if (this.curPageIdx === 0 || this.tarPageIdx === 0 || flipAnimeTask != null)\n        return\n      this.tarPageIdx -= 1;\n      this.prepareLeftToRight()\n      flipAnimeTask = this.flipAnime(this.pageRotate, 0)\n    },\n    autoRightToLeft() {\n      if (this.curPageIdx === this.pageList.length - 1 || this.tarPageIdx === this.pageList.length - 1 || flipAnimeTask != null)\n        return\n      this.tarPageIdx += 1;\n      this.prepareRightToLeft()\n      flipAnimeTask = this.flipAnime(this.pageRotate, -180)\n    },\n    flipAnime(start, end, time = 1000) {\n      return anime({\n        targets: this,\n        pageRotate: [start, end],\n        duration: time,\n        easing: \"linear\",\n        complete() {\n          flipAnimeTask = null\n        }\n      });\n    }\n\n  },\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/stories/Stories.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"book_page\",attrs:{\"id\":\"book_page\"}},[(_vm.global.mode === 0)?_c('div',{staticClass:\"pre_arrow_part\",on:{\"click\":_vm.autoLeftToRight}}):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"body_part\"},[_c('div',{staticClass:\"books\"},[_c('div',{staticClass:\"page\"},[_c('div',{staticClass:\"page_left\",on:{\"click\":_vm.autoLeftToRight}},[(_vm.pageRotateSrc.L1)?_c('img',{staticClass:\"img_left\",style:('transform: translateX('+_vm.floatLeftValue * _vm.animeFloatL1+'rem);'),attrs:{\"src\":_vm.pageLeftSrc.L1}}):_vm._e(),_vm._v(\" \"),(_vm.pageRotateSrc.L2)?_c('img',{staticClass:\"img_left\",style:('transform: translateX('+_vm.floatLeftValue * _vm.animeFloatL2+'rem);'),attrs:{\"src\":_vm.pageLeftSrc.L2}}):_vm._e(),_vm._v(\" \"),(_vm.pageRotateSrc.L3)?_c('img',{staticClass:\"img_left\",style:('transform: translateX('+_vm.floatLeftValue * _vm.animeFloatL3+'rem);'),attrs:{\"src\":_vm.pageLeftSrc.L3}}):_vm._e(),_vm._v(\" \"),(_vm.pageRotateSrc.L4)?_c('img',{staticClass:\"img_left\",style:('transform: translateX('+_vm.floatLeftValue * _vm.animeFloatL4+'rem);'),attrs:{\"src\":_vm.pageLeftSrc.L4}}):_vm._e()]),_vm._v(\" \"),_c('div',{class:_vm.pageRotate >= -90 ? 'page_rotate':'page_rotate_left',style:('transform: rotateY(' + _vm.pageRotate + 'deg)'),on:{\"click\":_vm.autoRightToLeft}},[_c('img',{staticClass:\"page_shadow\",style:(_vm.pageRotate >= -90 ? 'opacity:'+(-_vm.pageRotate)/90*_vm.shadowMax : 'transform: scaleX(1); opacity:'+(180+_vm.pageRotate)/90*_vm.shadowMax),attrs:{\"src\":\"/static/book/page_shadow.png\"}}),_vm._v(\" \"),(_vm.pageRotateSrc.L1)?_c('img',{staticClass:\"img_right\",style:('transform: translateX('+(_vm.pageRotate >= -90 ? _vm.floatLeftValue * _vm.animeFloatL1+'rem);' : -_vm.floatRightValue * _vm.animeFloatL1+'rem) scaleX(-1);')),attrs:{\"src\":_vm.pageRotateSrc.L1}}):_vm._e(),_vm._v(\" \"),(_vm.pageRotateSrc.L2)?_c('img',{staticClass:\"img_right\",style:('transform: translateX('+(_vm.pageRotate >= -90 ? _vm.floatLeftValue * _vm.animeFloatL2+'rem);' : -_vm.floatRightValue * _vm.animeFloatL2+'rem) scaleX(-1);')),attrs:{\"src\":_vm.pageRotateSrc.L2}}):_vm._e(),_vm._v(\" \"),(_vm.pageRotateSrc.L3)?_c('img',{staticClass:\"img_right\",style:('transform: translateX('+(_vm.pageRotate >= -90 ? _vm.floatLeftValue * _vm.animeFloatL3+'rem);' : -_vm.floatRightValue * _vm.animeFloatL3+'rem) scaleX(-1);')),attrs:{\"src\":_vm.pageRotateSrc.L3}}):_vm._e(),_vm._v(\" \"),(_vm.pageRotateSrc.L4)?_c('img',{staticClass:\"img_right\",style:('transform: translateX('+(_vm.pageRotate >= -90 ? _vm.floatLeftValue * _vm.animeFloatL4+'rem);' : -_vm.floatRightValue * _vm.animeFloatL4+'rem) scaleX(-1);')),attrs:{\"src\":_vm.pageRotateSrc.L4}}):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"page_right\",on:{\"click\":_vm.autoRightToLeft}},[(_vm.pageRotateSrc.L1)?_c('img',{staticClass:\"img_right\",style:('transform: translateX('+_vm.floatRightValue * _vm.animeFloatL1+'rem);'),attrs:{\"src\":_vm.pageRightSrc.L1}}):_vm._e(),_vm._v(\" \"),(_vm.pageRotateSrc.L2)?_c('img',{staticClass:\"img_right\",style:('transform: translateX('+_vm.floatRightValue * _vm.animeFloatL2+'rem);'),attrs:{\"src\":_vm.pageRightSrc.L2}}):_vm._e(),_vm._v(\" \"),(_vm.pageRotateSrc.L3)?_c('img',{staticClass:\"img_right\",style:('transform: translateX('+_vm.floatRightValue * _vm.animeFloatL3+'rem);'),attrs:{\"src\":_vm.pageRightSrc.L3}}):_vm._e(),_vm._v(\" \"),(_vm.pageRotateSrc.L4)?_c('img',{staticClass:\"img_right\",style:('transform: translateX('+_vm.floatRightValue * _vm.animeFloatL4+'rem);'),attrs:{\"src\":_vm.pageRightSrc.L4}}):_vm._e()])])])]),_vm._v(\" \"),(_vm.global.mode === 0)?_c('div',{staticClass:\"next_arrow_part\",on:{\"click\":_vm.autoRightToLeft}}):_vm._e(),_vm._v(\" \"),_c('LangTransfer'),_vm._v(\" \"),_c('Menu')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-405a4c29\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/stories/Stories.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-405a4c29\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Stories.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Stories.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Stories.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-405a4c29\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Stories.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-405a4c29\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/stories/Stories.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}