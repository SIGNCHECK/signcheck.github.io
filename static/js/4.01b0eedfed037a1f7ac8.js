webpackJsonp([4],{qSqr:function(t,e){},qxW8:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("lxVV"),s=a("XoMy"),i=a.n(s),r=a("PO8r"),n=a("NFr2"),g=a("bYoP"),l=a("kg1Y"),c=void 0,m={name:"Stories",data:function(){return{global:o.a,pageRotate:0,curPageIdx:0,tarPageIdx:0,pageLeftSrc:null,pageRotateSrc:null,pageRightSrc:null,pageList:[],totalPageNum:9,shadowMax:.2,animeMaxLength:660,animeFloatL1:0,animeFloatL2:.2,animeFloatL3:.8,animeFloatL4:.4,floatLeftValue:0,floatRightValue:0,isShowStory:!1,showStoryLock:!1}},components:{Menu:r.a,LangTransfer:n.a,Footer:g.a,Logo:l.a},beforeCreate:function(){o.a.refresh_windows_size(),o.a.set_lang_pack()},created:function(){this.init(),this.resize_book()},mounted:function(){var t=this;window.onresize=function(){return o.a.refresh_windows_size(),void t.resize_book()},r.a.methods.change_logo_color("#251714","#efcd24",1e3)},watch:{pageRotate:function(t,e){console.log(this.pageRotate),e>t&&e-t<179?-180===t&&(this.curPageIdx+=1,this.pageRotate=0):e<t&&t-e<179&&-180===e&&(this.curPageIdx-=1),this.updateImg(),this.updateMove()}},methods:{resize_book:function(){if(0===o.a.mode)return document.documentElement.style.setProperty("--book_width","1200rem"),void document.documentElement.style.setProperty("--book_height","700rem");var t=700/752.6,e=o.a.height/o.a.width*750;document.documentElement.style.setProperty("--screen_height",e+"rem"),1320*t>e-170&&(t=(e-170)/1320),document.documentElement.style.setProperty("--book_width",1320*t+"rem"),document.documentElement.style.setProperty("--book_height",752.6*t+"rem")},init:function(){var t=this,e=void 0;0===o.a.mode?e="pc":1===o.a.mode&&(e="mobile");for(var a=1;a<=this.totalPageNum;a++)this.pageList.push({L1:"/static/book/"+e+"/"+a+"/1.png",L2:"/static/book/"+e+"/"+a+"/2.png",L3:"/static/book/"+e+"/"+a+"/3.png",L4:"/static/book/"+e+"/"+a+"/4.png"});this.updateImg(),setTimeout(function(){t.autoRightToLeft()},500)},prepareRightToLeft:function(){-180===this.pageRotate&&(this.pageRotate=0),this.pageRightSrc=this.pageList[this.curPageIdx+1]},prepareLeftToRight:function(){0===this.pageRotate&&(this.pageRotate=-180),this.pageRightSrc=this.pageList[this.curPageIdx]},drag_right_to_left:function(t){var e=t.target,a=t.clientX-e.offsetLeft,o=t.clientY-e.offsetTop;document.onmousemove=function(t){var e=t.clientX-a,s=t.clientY-o;console.log(e),console.log(s)},document.onmouseup=function(t){document.onmousemove=null,document.onmouseup=null}},drag_left_to_right:function(){console.log("drag")},updateImg:function(){this.pageLeftSrc=this.pageList[this.curPageIdx],this.curPageIdx+1!==this.pageList.length&&(this.pageRightSrc=this.pageList[this.curPageIdx+1],this.pageRotateSrc=this.pageRotate>=-90?this.pageList[this.curPageIdx]:this.pageList[this.curPageIdx+1])},updateMove:function(){this.floatLeftValue=this.pageRotate/180*this.animeMaxLength,this.floatRightValue=this.floatLeftValue+this.animeMaxLength},autoLeftToRight:function(){0!==this.curPageIdx&&0!==this.tarPageIdx&&null==c&&(this.tarPageIdx-=1,this.prepareLeftToRight(),c=this.flipAnime(this.pageRotate,0))},autoRightToLeft:function(){this.curPageIdx!==this.pageList.length-1&&this.tarPageIdx!==this.pageList.length-1&&null==c&&(this.tarPageIdx+=1,this.prepareRightToLeft(),c=this.flipAnime(this.pageRotate,-180))},flipAnime:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;return i()({targets:this,pageRotate:[t,e],duration:a,easing:"linear",complete:function(){c=null}})},show_story:function(){var t=this;t.showStoryLock||t.isShowStory||(t.showStoryLock=!0,t.isShowStory=!0,setTimeout(function(){r.a.methods.change_logo_color("#ffffff","#efcd24",1e3),i()({targets:"div.story_mask",opacity:.9,duration:500,easing:"linear",complete:function(){t.showStoryLock=!1}})},1))},hide_story:function(){var t=this;!t.showStoryLock&&t.isShowStory&&(t.showStoryLock=!0,setTimeout(function(){r.a.methods.change_logo_color("#251714","#efcd24",1e3),i()({targets:"div.story_mask",opacity:0,duration:500,easing:"linear",complete:function(){t.isShowStory=!1,t.showStoryLock=!1}})},1))},bookmark_hover:function(){i()({targets:"img.bookmark",translateX:"30rem",duration:200,easing:"linear",complete:function(){}})},bookmark_release:function(){i()({targets:"img.bookmark",translateX:"0",duration:200,easing:"linear",complete:function(){}})}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"book_page",attrs:{id:"book_page",onselectstart:"return false",ondragstart:"return false"}},[a("v-touch",{on:{swipeup:t.autoRightToLeft,swipedown:t.autoLeftToRight}},[a("div",{staticClass:"body_part"},[a("div",{staticClass:"books"},[a("div",{staticClass:"about_page"},[a("div",{staticClass:"page_left",on:{click:t.autoLeftToRight,mousedown:t.drag_right_to_left}},[t.pageRotateSrc.L1?a("img",{staticClass:"img_left",style:"transform: translateX("+t.floatLeftValue*t.animeFloatL1+"rem);",attrs:{src:t.pageLeftSrc.L1}}):t._e(),t._v(" "),t.pageRotateSrc.L2?a("img",{staticClass:"img_left",style:"transform: translateX("+t.floatLeftValue*t.animeFloatL2+"rem);",attrs:{src:t.pageLeftSrc.L2}}):t._e(),t._v(" "),t.pageRotateSrc.L3?a("img",{staticClass:"img_left",style:"transform: translateX("+t.floatLeftValue*t.animeFloatL3+"rem);",attrs:{src:t.pageLeftSrc.L3}}):t._e(),t._v(" "),t.pageRotateSrc.L4?a("img",{staticClass:"img_left",style:"transform: translateX("+t.floatLeftValue*t.animeFloatL4+"rem);",attrs:{src:t.pageLeftSrc.L4}}):t._e()]),t._v(" "),a("div",{class:t.pageRotate>=-90?"page_rotate":"page_rotate_left",style:"transform: rotateY("+t.pageRotate+"deg)",on:{click:t.autoRightToLeft,mousedown:t.drag_left_to_right}},[a("img",{staticClass:"page_shadow",style:t.pageRotate>=-90?"opacity:"+-t.pageRotate/90*t.shadowMax:"transform: scaleX(1); opacity:"+(180+t.pageRotate)/90*t.shadowMax,attrs:{src:"/static/book/page_shadow.png"}}),t._v(" "),t.pageRotateSrc.L1?a("img",{staticClass:"img_right",style:"transform: translateX("+(t.pageRotate>=-90?t.floatLeftValue*t.animeFloatL1+"rem);":-t.floatRightValue*t.animeFloatL1+"rem) scaleX(-1);"),attrs:{src:t.pageRotateSrc.L1}}):t._e(),t._v(" "),t.pageRotateSrc.L2?a("img",{staticClass:"img_right",style:"transform: translateX("+(t.pageRotate>=-90?t.floatLeftValue*t.animeFloatL2+"rem);":-t.floatRightValue*t.animeFloatL2+"rem) scaleX(-1);"),attrs:{src:t.pageRotateSrc.L2}}):t._e(),t._v(" "),t.pageRotateSrc.L3?a("img",{staticClass:"img_right",style:"transform: translateX("+(t.pageRotate>=-90?t.floatLeftValue*t.animeFloatL3+"rem);":-t.floatRightValue*t.animeFloatL3+"rem) scaleX(-1);"),attrs:{src:t.pageRotateSrc.L3}}):t._e(),t._v(" "),t.pageRotateSrc.L4?a("img",{staticClass:"img_right",style:"transform: translateX("+(t.pageRotate>=-90?t.floatLeftValue*t.animeFloatL4+"rem);":-t.floatRightValue*t.animeFloatL4+"rem) scaleX(-1);"),attrs:{src:t.pageRotateSrc.L4}}):t._e()]),t._v(" "),0!==t.curPageIdx&&0!==t.pageRotate&&t.pageRotate>=-90?a("div",{staticClass:"bookmark_rotate_box",style:"transform: rotateY("+t.pageRotate+"deg)"},[a("div",{staticClass:"bookmark_box",staticStyle:{opacity:"0.8"},attrs:{id:"bookmark_rotate"}},[a("img",{staticClass:"bookmark",attrs:{src:"static/book/bookmark.svg"}})])]):t._e(),t._v(" "),a("div",{staticClass:"page_right",on:{click:t.autoRightToLeft}},[t.pageRotateSrc.L1?a("img",{staticClass:"img_right",style:"transform: translateX("+t.floatRightValue*t.animeFloatL1+"rem);",attrs:{src:t.pageRightSrc.L1}}):t._e(),t._v(" "),t.pageRotateSrc.L2?a("img",{staticClass:"img_right",style:"transform: translateX("+t.floatRightValue*t.animeFloatL2+"rem);",attrs:{src:t.pageRightSrc.L2}}):t._e(),t._v(" "),t.pageRotateSrc.L3?a("img",{staticClass:"img_right",style:"transform: translateX("+t.floatRightValue*t.animeFloatL3+"rem);",attrs:{src:t.pageRightSrc.L3}}):t._e(),t._v(" "),t.pageRotateSrc.L4?a("img",{staticClass:"img_right",style:"transform: translateX("+t.floatRightValue*t.animeFloatL4+"rem);",attrs:{src:t.pageRightSrc.L4}}):t._e()]),t._v(" "),0!==t.curPageIdx?a("div",{staticClass:"bookmark_box",on:{click:t.show_story,mouseenter:t.bookmark_hover,mouseleave:t.bookmark_release}},[a("img",{staticClass:"bookmark",attrs:{src:"static/book/bookmark.svg"}})]):t._e()])])])]),t._v(" "),t.isShowStory?a("div",{staticClass:"story_mask",on:{click:t.hide_story}},[a("div",{class:"content_text_"+t.global.lang+" story_text"},[t._v(t._s(t.global.lang_pack.stories_list[t.curPageIdx])+"\n      ")])]):t._e(),t._v(" "),a("LangTransfer"),t._v(" "),a("Logo",{attrs:{canBeHidden:!1}}),t._v(" "),a("Menu")],1)},staticRenderFns:[]};var u=a("VU/8")(m,h,!1,function(t){a("qSqr")},"data-v-aaebbcb8",null);e.default=u.exports}});
//# sourceMappingURL=4.01b0eedfed037a1f7ac8.js.map